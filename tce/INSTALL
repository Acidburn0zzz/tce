Building and installation
=========================

Building and installation with the help of autotools should be very easy. 
First, to create Makefiles you have to run configure as follows:

    ./configure --prefix=INSTALLATION_DIRECTORY

If you don't give prefix, the software will be installed in /usr/local/.
In that case you have to install TCE as root. 

Be sure to set CXXFLAGS environment variable to include aggressive 
optimization flags (e.g., "export CXXFLAGS=-O3") before running 
the configure script. This results in much more efficient TCE toolset, 
most notably the simulator is often more than 10x faster when compiled 
with aggressive compiler flags.

After running configure, it should be enough to just type

      make
      make install

In order to compile C code you need to also compile the C frontend,
tce-llvm-gcc. It has its own README-INSTALL.

Building the development version
================================

The development version does not ship with a pregenerated 'configure' script.
In order to build the development version, one needs to generate the
configure script by running 'autoreconf' in the TCE root directory.
Autoreconf is part of autotools, thus you need to install packages 
'automake1.9' and 'autoconf'.

Experimental Python bindings
============================

The distribution contains experimental Python bindings for some of the
TCE libraries. The bindings are not built by default, you have to give
the "--enable-python" flag to ./configure.

The bindings require the Boost.Python library and the Python
development headers and libraries. On Debian based Linux distributions
installing the libboost-python-dev package should be sufficient.

Library and tools version prerequisites
=======================================

These are the current prerequisites for libraries and tools used by TCE:

Compiler              supported versions
-----------------     ----------------
GCC                   3.2.2+
or
Intel C++ Compiler    8.0+

Library               supported versions                   library licence
-----------------     ------------------                   ---------------
Xerces                2.3.0+                               Apache v2.0
wxWidgets             2.6.0+                               wxWidgets
Tcl                   8.0-8.4                              BSD-style
Boost                 1.33+                               very permissive
sqlite3               3.0.0+                               public domain
Python                2.4,2.5                              very permissive
LLVM                  2.3                                  LLVM Release License


optional:

Editline              2.9                                  BSD-style

    To get line editing capabilities to the command line interface of the simulator.

    You can download the sources here: http://www.thrysoee.dk/editline/

    Note: this library might require 'termcap' library in some distributions. 
    The package is named 'libedit-dev' in Debian and Ubuntu.

Python headers               2.4                                  very permissive

    The Python interpreter and its headers and libraries are
    needed for the optional Python bindings.

The development files of the following Boost libraries are required by TCE:
. regexp,
. spirit,
. filesystem,
. format,
. thread,
. graph,
. tuple,
. python  (optional, required for the Python bindings).

Some distributions, like Fedora Core, include all Boost libraries in a 
single package, but some, like Debian and Ubuntu, have separated them in 
several packages. 

Remember to install the '-dev' versions of the packages in order to get
the library headers which are need to compile client code against them.
You also need a version of "GNU Make" to build TCE.

For example, to install the required libraries and tools for Ubuntu 7.10
using its package manager 'apt-get', you need to execute the following command
as root: 

apt-get install libwxgtk2.8-dev libboost-{filesystem,graph,regex,thread}-dev \
                tcl8.4-dev libedit-dev libsqlite3-dev sqlite3 \
                libxerces27-dev g++ make latex2html

NOTE! In order to compile programs from C, you need to install LLVM. There
are no decent Debian packages available for older Debian/Ubuntu versions, 
so the best way is to install it from sources. 

You can download the LLVM sources from here: http://www.llvm.org/releases/
Remember to download a supported LLVM version, as listed above.

Tcl 8.5 has a bug with stack size detection which causes Proxim's interpreter
to not work at all with it, therefore it's not supported by TCE at the moment.

See the TCE Bug report for more info.

  http://tce.cs.tut.fi/cgi-bin/tce-bugzilla/show_bug.cgi?id=14

TCE on 64-bit distributions
===========================
If you compile LLVM from sources you should give --enable-pic option for
the LLVM's configure script. Otherwise compilation of TCE might fail.

Troubleshooting
===============
New Ubuntu versions seem to have problems with the shipped autotools
scripts. In order to compile TCE on Ubuntu 8.10 and newer, you should
generate the autotools scripts after installing 'libtool' with

  ./gen_config.sh
  
The resulting autotools scripts should work with the new libtool
version.

