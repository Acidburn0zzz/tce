Library and tools version prerequisites for TCE
===============================================

These are the current prerequisites for libraries and tools required to
build TCE:

Compiler              supported versions
-----------------     ----------------
GCC                   3.2.2+

Library               supported versions                   library licence
-----------------     ------------------                   ---------------
Xerces                2.3.0+                               Apache v2.0
wxWidgets             2.6.0+                               wxWidgets
Tcl                   8.0-8.4                              BSD-style
Boost                 1.33+                                very permissive
sqlite3               3.0.0+                               public domain
LLVM                  2.7                                  LLVM Release License
Editline              2.9                                  BSD-style

Remarks concerning all libraries
--------------------------------
Remember to install the '-dev' versions of the packages in order to get
the library headers which are need to compile client code against them.
You also need a version of "GNU Make" to build TCE.

For example, to install the required libraries and tools for Ubuntu
10.04 using its package manager 'apt-get', you need to execute 
the following command: 

sudo apt-get install libwxgtk2.8-dev libboost-{filesystem,graph,regex,thread}-dev \
tcl8.4-dev libedit-dev libsqlite3-dev sqlite3 libxerces-c2-dev g++ make latex2html \
llvm-dev clang

Editline
--------
Editline is used for command line editing/history browsing capabilities to 
the command line interface of the simulator.

You can download the sources here: http://www.thrysoee.dk/editline/

Note: this library might require 'termcap' library in some distributions. 
The package is named 'libedit-dev' in Debian-based distributions.

Boost
-----
The development files of the following Boost libraries are required by TCE:
. regexp,
. spirit,
. filesystem,
. format,
. thread,
. graph,
. tuple

Some distributions, like Fedora Core, include all Boost libraries in a 
single package, but some, like Debian, have separated them in several 
packages. 

LLVM and Clang
--------------
In order to compile programs from C with TCE, you need to install LLVM and
Clang.

Unless the correct LLVM version is available for your distribution 
(at least Ubuntu 10.04 includes LLVM 2.7), the best way is to install it from 
the sources. You can download the LLVM sources from http://www.llvm.org/releases/
or follow the 9 steps below:

 1) wget http://llvm.org/releases/2.7/llvm-2.7.tgz
 2) tar xfz llvm-2.7.tgz
 3) cd llvm-2.7/tools
 4) wget http://llvm.org/releases/2.7/clang-2.7.tgz
 5) tar xfz clang-2.7.tgz
 6) mv clang-2.7 clang
 7) cd ..
 8) ./configure --prefix=YOUR_INSTALLATION_PREFIX_HERE --enable-shared
 9) make REQUIRES_RTTI=1 && make install

Remember to download a supported LLVM version, as listed above.

NOTE! In order to use LLVM with TCE you need to configure LLVM 
with '--enable-shared' switch and compile it with 'make REQUIRES_RTTI=1'.


Building and installing TCE
===========================

The following steps show how to install the actual TCE toolset:

Compile the tce-llvm-gcc compiler
---------------------------------
If you want a working compiler and libc, before building TCE you should 
build and install the tce-llvm-gcc compiler. Instructions for doing so are
found in the tce-llvm-gcc/INSTALL file. After you have installed
tce-llvm-gcc, read on.

Running autoreconf (if necessary)
---------------------------------
If you have downloaded a stable TCE release, you can omit this step.
The development version does not ship with a pregenerated 'configure' script.
In order to build the development version, one needs to generate the
configure script by running 'autoreconf -i --force' in the TCE root directory.
For this to work you need to install packages 'libtool', 'automake1.9' and 
'autoconf'.

Setting compiler options
------------------------
Be sure to set CXXFLAGS environment variable to include aggressive 
optimization flags (e.g., "export CXXFLAGS=-O3") before running 
the 'configure' script. This results in a much more efficient TCE toolset, 
most notably the simulator can be more than 10x faster when compiled 
with aggressive compilation flags.

Configuring TCE
---------------
Building and installation with the help of autotools should be very easy. 
First, to create Makefiles you have to run configure as follows:

    ./configure --prefix=INSTALLATION_DIRECTORY

If you don't give a prefix, the software will be installed in /usr/local/.
In that case you have to install TCE as root. 

Running 'make'
--------------
After running configure, it should be enough to just type

      make
      make install

After installing TCE to somewhere in PATH, you can run a "smoke test" suite
for the most important tools in TCE installation by running the command
'tce-selftest -v'. This might take up to two hours, depending on your
computer.

