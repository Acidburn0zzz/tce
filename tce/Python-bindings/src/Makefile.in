#
# Makefile template for the Python bindings.
# Pertti Kellomaki 2007, pertti.kellomaki@tut.fi
#
# Makefile.in is NOT a generated file
# Do NOT delete it unless you provide a Makefile.am that generates a corresponding file.
#

CCSOURCES=ControlFlowGraph.cc mach.cc osal.cc program.cc ProgramDependenceGraph.cc \
	ResourceManager.cc ResourceModel.cc tools.cc tpef.cc Algorithms.cc SchedulerModules.cc

all: $(CCSOURCES)	

	@PYTHON@ setup.py build

install: $(CCSOURCES)
	@PYTHON@ setup.py install --prefix=@prefix@

clean::
	/bin/rm -f $(CCSOURCES) $(CCSOURCES:.cc=.d) TCE-includes/*.hh TCE-includes/*.icc
	@PYTHON@ setup.py clean

%.cc: %.pypp
	export PYTHONPATH="../tools/pygccxml"; @PYTHON@ $<


%.d: %.pypp
	export PYTHONPATH="../tools/pygccxml"; @PYTHON@ $< --generate-dependences 

%.hh:
	(cd TCE-include; ./make-link.sh $@)

%.icc:
	(cd TCE-include; ./make-link.sh $@)

include $(CCSOURCES:.cc=.d)
