#!/bin/bash
#
# Script to build llvm pass plugins

if test $# -lt 2
then
    echo "Usage: buildllvmpass <object file> <source files>"
else
    compiler=@CC@
    llvmlibs=$(llvm-config --libs core)
    llvmldflags=$(llvm-config --ldflags)
    llvmcppflags=$(llvm-config --cppflags)
    soflags="@SHARED_CXX_FLAGS@ -o"
    objectfile=$1
    shift
    $compiler $llvmcppflags $llvmldflags $llvmlibs $soflags $objectfile $* && \
        echo "Compilation successful." || echo "Compilation failed." >&2
fi
