/**
 * @file TCEAsmPrinter.h
 * 
 * Declaration of TCEAsmPrinter class.
 * 
 * @author Veli-Pekka Jääskeläinen 2007 (vjaaskel@cs.tut.fi)
 * @note rating: red
 */

#include <llvm/CodeGen/AsmPrinter.h>

#include <map>

namespace llvm {
class TCEAsmPrinter : public AsmPrinter {
 public:
    TCEAsmPrinter(
        std::ostream& o, TargetMachine& tm,
        const TargetAsmInfo* t);


   virtual ~TCEAsmPrinter();

   virtual const char* getPassName() const {
      return "TCE Assembly Printer";
   }

 private:
   void printOperand(const MachineInstr *MI, int opNum);
   void printMemOperand(
       const MachineInstr *MI, int opNum, const char *Modifier = 0);

   void printCCOperand(const MachineInstr *MI, int opNum);

   bool printInstruction(const MachineInstr *MI);  // autogenerated.
   bool runOnMachineFunction(MachineFunction &F);

   bool doInitialization(Module &M);
   bool doFinalization(Module &M);
   bool PrintAsmOperand(
       const MachineInstr* mi, unsigned opNo,
       unsigned asmVariant, const char* extraCode);

   typedef std::map<const Value*, unsigned> ValueMapTy;
   ValueMapTy NumberForBB_;
};
}
