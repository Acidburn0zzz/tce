/**
 * @file example.cc
 *
 * Operations for testing purposes.
 *
 * @author Jussi Nykänen 2004 (nykanen@cs.tut.fi)
 */

#include "OSAL.hh"

OPERATION(TESTADD)

TRIGGER
  IO(3) = INT(1) + INT(2);
  RETURN_READY;
END_TRIGGER;

END_OPERATION(TESTADD);

OPERATION(TESTSUB)

TRIGGER
  IO(3) = INT(1) - INT(2);
  RETURN_READY;
END_TRIGGER;

END_OPERATION(TESTSUB);

OPERATION(TESTMUL)

TRIGGER
  IO(3) = INT(1) * INT(2);
  RETURN_READY;
END_TRIGGER;

END_OPERATION(TESTMUL);

OPERATION(TESTSTORE)

TRIGGER
  INITIATE_WRITE(INT(1), 4, UINT(2));
  RETURN_READY;
END_TRIGGER;

END_OPERATION(TESTSTORE);

OPERATION(TESTLOAD)

TRIGGER
  INITIATE_READ(INT(1), 4);
  RETURN_NOT_READY;
END_TRIGGER;

LATE_RESULT
  if (MEM_RESULT_READY()) {
    UIntWord data;
    MEM_DATA(data);
    IO(2) = data;
    RETURN_UPDATED;
   } else {
    RETURN_NOT_UPDATED;
   }
END_LATE_RESULT;

END_OPERATION(TESTLOAD);
